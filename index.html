<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BINGO</title>
  <style>
    body {
  font-family: 'Poppins', sans-serif;
background: url("gorilla.jpg") repeat fixed;
background-size: auto;
  color: #fff;
  padding: 20px;
  text-shadow: 1px 1px 3px rgba(0,0,0,0.4);
        }
    .container { max-width: 1200px; margin: 0 auto; }
    table { border-collapse: collapse; width: 100%; margin-top: 20px; font-size: 14px; background: rgba(255,255,255,0.9); color: #222; border-radius: 10px; overflow: hidden; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    th { background: #006400; color: #fff; position: sticky; top: 0; z-index: 5; }
    tr:nth-child(even) { background: #f9f9f9; }
    .highlight { background: #ffec8b; font-weight: 700; color: #c81d25; }
    h1 { text-align: center; font-size: 2.5em; margin-top: 0; }
    .note { text-align: center; font-size: 1.1em; margin-bottom: 10px; }
    #fireworksCanvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 10; }
    .results { margin-bottom: 20px; text-align: center; position: sticky; top: 0; background: rgba(0,0,0,0.7); padding: 10px; border-radius: 10px; z-index: 6; }
    ul { list-style: none; padding: 0; margin: 0; }
    li { background: rgba(255,255,255,0.2); padding: 8px; margin: 5px auto; width: fit-content; border-radius: 6px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>üéÑ BINGO üéÅ</h1>
<button id="toggleResults" 
  style="padding:10px 15px; background:#006400; border:none; color:#fff; border-radius:8px; cursor:pointer; margin-bottom:10px;">
  Hide Results
</button>

<div class="results" id="resultsBox">
  <h2>‚ú® Official 6/49 Draw Results ‚ú®</h2>
  <ul id="resultsList"></ul>
</div>


    <table id="lottoTable">
      <thead>
        <tr>
          <th>Name</th>
          <th>#1</th>
          <th>#2</th>
          <th>#3</th>
          <th>#4</th>
          <th>#5</th>
          <th>#6</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    const players = [
  { "name":"CHRIS", "nums":[4,15,18,37,40,42] },
  { "name":"KAT", "nums":[11,14,15,21,25,45] },
  { "name":"VAL", "nums":[2,8,12,18,33,46] },
  { "name":"KING", "nums":[2,4,9,18,23,25] },
  { "name":"HUBERT", "nums":[4,11,12,16,31,45] },
  { "name":"RITZ", "nums":[9,15,22,26,30,46] },
  { "name":"MAKI", "nums":[2,5,12,14,21,23] },
  { "name":"JAN-JAN", "nums":[2,10,12,24,32,46] },
  { "name":"RAP", "nums":[1,6,22,23,36,37] },
  { "name":"CHESTER", "nums":[4,7,11,17,24,35] },
  { "name":"JOEY", "nums":[1,10,15,19,29,43] },
  { "name":"DYNE", "nums":[2,6,7,14,28,36] },
  { "name":"AYIE", "nums":[2,7,16,22,31,47] },
  { "name":"BONG", "nums":[5,12,16,18,24,42] },
  { "name":"HB", "nums":[4,9,11,17,24,30] },
  { "name":"BRENDA", "nums":[9,11,16,19,36,44] },
  { "name":"BRENDA", "nums":[6,8,13,14,21,29] },
  { "name":"MANG BOY", "nums":[3,16,26,30,33,49] },
  { "name":"PAUL T.", "nums":[4,17,27,31,34,48] },
  { "name":"ARIEL", "nums":[10,15,20,22,26,42] },
  { "name":"KUYA MAR", "nums":[7,24,26,28,29,31] },
  { "name":"RAUL", "nums":[4,9,11,34,38,44] },
  { "name":"RONALD", "nums":[3,9,10,20,23,36] },
  { "name":"MOMMY", "nums":[13,16,19,29,30,49] },
  { "name":"GIGI", "nums":[4,5,8,11,14,17] },
  { "name":"MRBADALANDABAD", "nums":[1,4,10,16,30,35] },
  { "name":"TESS", "nums":[1,2,26,28,43,44] },
  { "name":"CARCHE", "nums":[10,15,21,30,42,47] },
  { "name":"MASTER", "nums":[2,6,10,26,27,29] },
  { "name":"JOAN", "nums":[9,18,19,26,30,32] },
  { "name":"BABERO", "nums":[2,4,18,31,44,46] },
  { "name":"RONNIE", "nums":[4,10,14,16,28,38] },
  { "name":"RICHARD", "nums":[5,7,12,25,40,36] },
  { "name":"PHEB", "nums":[15,19,21,33,36,44] },
  { "name":"JOSEPH", "nums":[15,17,38,39,41,44] },
  { "name":"MARISSA", "nums":[1,6,8,12,36,48] },
  { "name":"OBET", "nums":[4,8,9,18,23,38] },
  { "name":"MARIA", "nums":[9,11,19,20,38,49] },
  { "name":"JEFF BATT", "nums":[4,9,13,14,21,47] },
  { "name":"INDAY", "nums":[6,7,17,26,38,45] },
  { "name":"CHRIS O", "nums":[2,12,29,36,45,49] },
  { "name":"SHANAIAH", "nums":[10,11,13,30,36,39] },
  { "name":"DARIO", "nums":[2,12,17,27,31,47] },
  { "name":"555", "nums":[7,10,17,27,32,47] },
  { "name":"JEFF", "nums":[4,9,20,24,29,43] },
  { "name":"NYAKK", "nums":[28,29,38,39,48,49] },
  { "name":"AAA", "nums":[11,13,25,38,47,49] },
  { "name":"OLIVE", "nums":[5,6,8,18,30,41] },
  { "name":"WAYAB", "nums":[6,8,21,28,40,41] },
  { "name":"HOME", "nums":[16,19,26,29,39,49] },
  { "name":"NED", "nums":[8,9,12,22,29,39] },
  { "name":"OPPA", "nums":[12,15,17,23,25,29] },
  { "name":"BOY", "nums":[1,2,5,6,48,49] },
  { "name":"NOSI", "nums":[2,7,14,22,38,40] },
  { "name":"DEN", "nums":[2,5,12,15,30,38] },
  { "name":"FAMILY TREE", "nums":[7,8,15,23,26,27] },
  { "name":"ELVIE", "nums":[4,6,7,17,19,49] },
  { "name":"FABRI", "nums":[2,10,13,16,39,49] },
  { "name":"GIRL", "nums":[6,7,8,12,17,27] },
  { "name":"RHEBZ", "nums":[14,15,18,32,43,45] },
  { "name":"JEN", "nums":[3,6,10,18,45,49] },
  { "name":"VILMA", "nums":[9,10,18,27,30,36] },
  { "name":"LEANDRO", "nums":[8,13,15,28,29,43] },
  { "name":"JINGGOY", "nums":[15,23,25,38,41,43] },
  { "name":"TEDDY", "nums":[8,10,13,14,19,25] },
  { "name":"JULIAN", "nums":[9,13,15,17,21,29] },
  { "name":"P.V.", "nums":[11,14,16,18,21,24] },
  { "name":"YANANG", "nums":[3,11,18,25,37,39] }

		];

    let drawResults = [];
    const tbody = document.querySelector('#lottoTable tbody');
    const resultsList = document.getElementById('resultsList');

const toggleBtn = document.getElementById("toggleResults");
const resultsBox = document.getElementById("resultsBox");

toggleBtn.addEventListener("click", () => {
  if (resultsBox.style.display === "none") {
    resultsBox.style.display = "block";
    toggleBtn.textContent = "Hide Results";
  } else {
    resultsBox.style.display = "none";
    toggleBtn.textContent = "Show Results";
  }
});

    
    async function fetchMagayoResults() {
      try {
        const res = await fetch(
          "https://r.jina.ai/http://www.lotto-8.com/canada/listltoCA649.asp",
          { cache: "no-store" }
        );
        const text = await res.text();

        const lines = text.split(/\r?\n/);
        const dateLineRe = /^\s*(\d{2})\/(\d{2})\s*$/;
        const numsLineRe = /^\s*25\([A-Z]{3}\)(\d{1,2}(?:,\d{1,2}){5})\s+\d{1,2}\s*$/;
		const yearLineRe = /^\s*(20\d{2})\s*$/;
		
		let currentYear = null;

        const resultsByDate = new Map();
        const START = new Date("2025-12-19T00:00:00");
		const END = new Date("2026-04-13T23:59:59");
        const monthNames = [null, "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

for (let i = 0; i < lines.length; i++) {

  // detect year header (2025, 2026, etc.)
  const y = lines[i].match(yearLineRe);
  if (y) {
    currentYear = parseInt(y[1], 10);
    continue;
  }

  const m = lines[i].match(dateLineRe);
  if (!m || !currentYear) continue;


          const dd = parseInt(m[1], 10);
          const mm = parseInt(m[2], 10);

          let j = i + 1;
          while (j < lines.length && lines[j].trim() === "") j++;

          if (j >= lines.length) continue;
          const n = lines[j].match(numsLineRe);
          if (!n) continue;

const year = (mm >= 12) ? 2025 : 2026;
const dateObj = new Date(currentYear, mm - 1, dd);

if (isNaN(+dateObj) || dateObj < START || dateObj > END) continue;


          const nums = n[1].split(",").map(x => parseInt(x.trim(), 10));
          if (nums.length !== 6 || nums.some(Number.isNaN)) continue;

          const dateStr = `${dd} ${monthNames[mm]} ${currentYear}`;
          resultsByDate.set(dateStr, nums);
        }

        drawResults = Array.from(resultsByDate.entries())
          .map(([date, nums]) => ({ date, nums }))
          .sort((a, b) => new Date(b.date) - new Date(a.date));

        updateResultsList();
        updateTable();
      } catch (err) {
        console.error("Error fetching results:", err);
        const li = document.createElement("li");
        li.textContent = "Unable to fetch results automatically.";
        resultsList.appendChild(li);
      }
    }

    function updateTable() {
      tbody.innerHTML = '';
      players.forEach(player => {
        const tr = document.createElement('tr');
        const nameTd = document.createElement('td');
        nameTd.textContent = player.name;
        tr.appendChild(nameTd);

        player.nums.forEach(num => {
          const td = document.createElement('td');
          td.textContent = num;
          if (drawResults.some(r => r.nums.includes(num))) td.classList.add('highlight');
          tr.appendChild(td);
        });

        tbody.appendChild(tr);
      });
    }

    function updateResultsList() {
      resultsList.innerHTML = '';
      drawResults.forEach(r => {
        const li = document.createElement('li');
        li.textContent = `${r.date}: ${r.nums.join(', ')}`;
        resultsList.appendChild(li);
      });
    }

    fetchMagayoResults();
  </script>
</body>
</html>
